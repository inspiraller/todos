FROM mongo

ARG MONGO_DB_NAME
ARG MONGO_TABLE_COLLECTION_NAME
ARG MONGO_USER
ARG MONGO_PASS

ENV ENV_MONGO_DB_NAME=$MONGO_DB_NAME
ENV ENV_MONGO_TABLE_COLLECTION_NAME=$MONGO_TABLE_COLLECTION_NAME
ENV ENV_MONGO_USER=$MONGO_USER
ENV ENV_MONGO_PASS=$MONGO_PASS

WORKDIR /scripts
COPY latest.csv .
COPY field_file_types.txt .
COPY script-import-csv.sh .
RUN chmod +x script-import-csv.sh
RUN echo "${ENV_MONGO_DB_NAME} ${ENV_MONGO_TABLE_COLLECTION_NAME} ${MONGO_USER} ${MONGO_PASS}"
CMD /scripts/script-import-csv.sh "${ENV_MONGO_DB_NAME}" "${ENV_MONGO_TABLE_COLLECTION_NAME}" "${MONGO_USER}" "${MONGO_PASS}"
